##### [RISM](../index.md)
##### [Главная страница](../../index.md)
### Настройка и оптимизация
#### Настройка количества фоновых процессов
Работы по сканированию в RISM выполняются параллельно.
Количество одновременно выполняемых работ определяется количеством фоновых процессов сервера sidekiq (часть приложения RISM).
> Необходимо учитывать, что каждая работа по сканированию потребляет некоторое количество оперативной памяти компьютера. То есть максимальное количество одновременно запущенных сканирований (фактически - максимальное количество фоновых процессов sidekiq) определяется доступным объемом памяти.

Количество фоновых процессов sidekiq настраивается в файле
```
config/sidekiq.yml
```
В этом файле для каждой очереди фоновых процессов по сканированию можно задать количество фоновых процессов (фоновые процессы берут и выполняют задачи из соответствующей очереди).

При этом имеются следующие очереди фоновых процессов.
* now_scan - сканирования, которые выполняются сразу (если есть свободные процессы в данной очереди) по требованию пользователя (при нажатии им соответствующей кнопки "Сканировать")
* scheduled_scan - сканирования, которые запускаются автоматически по заданному пользователем расписанию
* free_shodan_scan - сканирования через бесплатный API key сервиса Shodan, которые запускаются по требованию пользователя или по расписанию (при использовании платного ключа работы по сканированию будут запускаться процессами очередей now_scan или scheduled_scan). Значение для данной очереди (1) менять нельзя.
> Сканирование через Shodan по сути таковым не является, данные о состоянии сетевых портов просто берутся с указанного сервиса (если они там есть).
```yml
---
:concurrency: 21
staging:
  :concurrency: 21
production:
  :concurrency: 21
:queues:
  - default
  - now_scan
  - scheduled_scan
  - free_shodan_scan
:limits:
  default: 1
  now_scan: 5
  scheduled_scan: 14
  free_shodan_scan: 1
```
